

// app.get('/save/book',()=>{
//     const book = new Book({
//         titles:["درس اول","درس  دوم","درس سوم","درس چهارم","درس پنجم","درس ششم","درس هفتم","درس هشتم","درس نهم","درس دهم",],
//         nameId:'LAS',
//         grade:'هشتم',
//         subject:'عربی',
//         discripdescription:"نام درس های عربی هشتم"
//     })

//     book.save() 
//      .then(savedDoc => res.json({
//        success: true,
//        message: " ok",
//        data: savedDoc
//      }))
//      .catch(err => res.status(500).json({
//        success: false,
//        message: "خطا در ذخیره اطلاعات",
//        error: err.message
//      }));
// })
// app.get('/teaches/save-science-8th', (req, res) => {
//    const teach = new Teach({
//      "grade": "هشتم",
//      "bookName": "علوم",
//      "lessonName": "فصل اول",
//      "sections": [
//        {
//          "title": "تعریف مخلوط",
//          "content": "مخلوط به ماده‌ای گفته می‌شود که از ترکیب دو یا چند ماده خالص به وجود آمده باشد.\n\nانواع مخلوط:\n1. مخلوط همگن (محلول): اجزاء به صورت یکنواخت پراکنده شده‌اند مثل آب نمک\n2. مخلوط ناهمگن: اجزاء به صورت غیریکنواخت پراکنده شده‌اند مثل سالاد",
//          "order": 1
//        },
//        {
//          "title": "اجزای تشکیل دهنده مخلوط",
//          "content": "1. فاز مایع: مانند آب در آب نمک\n2. فاز جامد: مانند نمک در آب نمک\n3. فاز گاز: مانند هوا در نوشابه\n\nنکته: در مخلوط همگن فقط یک فاز قابل مشاهده است.",
//          "order": 2
//        },
//        {
//          "title": "روش‌های جداسازی مخلوط‌ها",
//          "content": "1. صاف کردن: برای جدا کردن مواد جامد از مایع\n2. تبخیر: برای جدا کردن مواد حل شده در مایعات\n3. تقطیر: برای جدا کردن مایعات مخلوط\n4. سانتریفیوژ: برای جدا کردن مواد با چگالی مختلف\n5. کروماتوگرافی: برای جدا کردن مواد حل شده",
//          "order": 3
//        },
//        {
//          "title": "محلول‌ها و غلظت",
//          "content": "محلول = حلال + حل شونده\n\nغلظت مقدار ماده حل شده در مقدار معینی از حلال است.\n\nواحدهای غلظت:\n- گرم بر لیتر\n- درصد جرمی\n- مولاریته",
//          "order": 4
//        },
//        {
//          "title": "کاربردهای عملی",
//          "content": "1. تصفیه آب: جداسازی ناخالصی‌ها از آب\n2. صنایع غذایی: تولید نوشیدنی‌ها\n3. پزشکی: تولید داروها\n4. محیط زیست: بازیافت مواد\n5. صنعت نفت: پالایش نفت خام",
//          "order": 5
//        }
//      ]
//    });

//    teach.save()
//      .then(savedDoc => res.json({
//        success: true,
//        message: "فصل اول علوم هشتم با موفقیت ذخیره شد",
//        data: savedDoc
//      }))
//      .catch(err => res.status(500).json({
//        success: false,
//        message: "خطا در ذخیره اطلاعات",
//        error: err.message
//      }));
// });





app.get('/creatquiz',(req,res)=>{
  const quiz = new Quiz({
  title: "درس اول",
  grade: "هفتم",
  subject: "ریاضی", // این خط را اضافه کنید
  questions: [
    {
      text: "کدام یک از گزینه‌های زیر عدد صحیح منفی است؟",
      options: [
        { text: "۵", isCorrect: false },
        { text: "۰", isCorrect: false },
        { text: "-۳", isCorrect: true },
        { text: "۲.۵", isCorrect: false }
      ],
      explanation: "اعداد صحیح منفی به اعدادی گفته می‌شود که کوچک‌تر از صفر هستند و با علامت منفی نمایش داده می‌شوند.",
      difficulty: 1
    },
    {
      text: "حاصل جمع (-۵) + (+۳) کدام است؟",
      options: [
        { text: "۸", isCorrect: false },
        { text: "۲", isCorrect: false },
        { text: "-۲", isCorrect: true },
        { text: "-۸", isCorrect: false }
      ],
      explanation: "وقتی عدد منفی بزرگ‌تر باشد، علامت جواب منفی می‌شود و تفاضل آنها را حساب می‌کنیم: ۵ - ۳ = ۲ → جواب -۲",
      difficulty: 2
    },
    {
      text: "کدام گزینه نمایش صحیح عدد «منفی هفت» است؟",
      options: [
        { text: "۷", isCorrect: false },
        { text: "-۷", isCorrect: true },
        { text: "۷-", isCorrect: false },
        { text: "۷+", isCorrect: false }
      ],
      explanation: "نوشتن علامت منفی قبل از عدد، روش استاندارد نمایش اعداد منفی است.",
      difficulty: 1
    },
    {
      text: "حاصل ضرب (-۴) × (+۳) کدام است؟",
      options: [
        { text: "۱۲", isCorrect: false },
        { text: "-۱۲", isCorrect: true },
        { text: "۷", isCorrect: false },
        { text: "-۷", isCorrect: false }
      ],
      explanation: "ضرب عدد منفی در مثبت همیشه نتیجه منفی دارد: ۴ × ۳ = ۱۲ → جواب -۱۲",
      difficulty: 2
    },
    {
      text: "کدام گزینه درباره محور اعداد صحیح نادرست است؟",
      options: [
        { text: "اعداد سمت راست صفر مثبت هستند", isCorrect: false },
        { text: "اعداد سمت چپ صفر منفی هستند", isCorrect: false },
        { text: "صفر نه مثبت است نه منفی", isCorrect: false },
        { text: "عدد -۵ از -۲ بزرگتر است", isCorrect: true }
      ],
      explanation: "در محور اعداد، هرچه به سمت چپ برویم اعداد کوچک‌تر می‌شوند، پس -۵ از -۲ کوچک‌تر است.",
      difficulty: 3
    }
  ]
})

quiz.save().then(result =>res.send(result)).catch(err=>res.status(err))
})


// 404 handler
app.use((req, res) => res.status(404).render('404', { title: 'صفحه پیدا نشد' }));


app.listen(PORT, () => console.log(`Server running on port ${PORT}`));




// استارت سرور
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`server is running on Port:${PORT} ✓`);
  console.log(`health Link: http://localhost:${PORT}/health`);
});


app.get('/lessonCreat', (req, res) => {
  const teach = new Teach({
    grade: "هفتم",
    bookName: "ریاضی",
    lessonName: "درس پنجم",
    sections: [
      {
        title: "بخش اول: شمارنده‌ها",
        content: `<p>شمارنده‌های یک عدد، اعدادی هستند که آن عدد بر آن‌ها بخش‌پذیر است.</p>
<p><strong>مثال:</strong> شمارنده‌های 12: 1، 2، 3، 4، 6، 12</p>
<p>هر عدد حداقل دو شمارنده دارد: 1 و خودش.</p>
<p>👉 این پایهٔ همه مفاهیم بعدی دربارهٔ اول بودن و مرکب بودن اعداد است.</p>`,
        videoEmbedCode: `<iframe src="https://www.aparat.com/video/video/embed/videohash/z44sgh2/vt/frame" allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>`,
        order: 1
      },
      {
        title: "بخش دوم: اعداد اول و مرکب",
        content: `<ul>
<li><strong>عدد اول:</strong> بزرگ‌تر از 1 و دقیقاً دو شمارنده دارد (1 و خودش).<br><strong>مثال:</strong> 2، 3، 5، 7، 11</li>
<li><strong>عدد مرکب:</strong> بزرگ‌تر از 1 و بیش از دو شمارنده دارد.<br><strong>مثال:</strong> 4، 6، 8، 9، 12</li>
</ul>
<p>👉 اینجا یاد می‌گیری کدام عدد ساده و بنیادی است و کدام عدد چند بخش دارد.</p>`,
        order: 2
      },
      {
        title: "بخش سوم: روش تعیین اعداد اول",
        content: `<p>برای فهمیدن اول بودن یک عدد:</p>
<ul>
<li>عدد را بر اعداد کوچکتر از خودش امتحان کن (به جز 1).</li>
<li>اگر هیچ‌کدام بخش‌پذیر نبود → عدد اول است.</li>
</ul>
<p><strong>مثال:</strong> 13 → بخش‌پذیری بر 2، 3، 4، 5، 6؟ نه → پس 13 عدد اول است.</p>
<p><strong>مثال:</strong> 15 → بخش‌پذیری بر 3 → بله → پس 15 مرکب است.</p>
<p>👉 اینجا پایهٔ استدلال ریاضی را هم یاد می‌گیری: چطور با دلیل ثابت می‌کنیم عدد اول یا مرکب است.</p>`,
        order: 3
      },
      {
        title: "بخش چهارم: قواعد و نکات مهم",
        content: `<ul>
<li>عدد 1 عدد اول نیست.</li>
<li>عدد 2 تنها عدد اول زوج است.</li>
<li>همهٔ اعداد اول بزرگ‌تر از 2 فرد هستند.</li>
</ul>
<p>👉 این نکات مثل قوانین بازی هستند که باید بدانید تا در حل تمرین‌ها اشتباه نکنید.</p>`,
        order: 4
      },
      {
        title: "بخش پنجم: تمرین و کاربرد",
        content: `<ul>
<li>شمارنده‌های عدد 18 را پیدا کن → 1، 2، 3، 6، 9، 18</li>
<li>مشخص کن کدام اعداد اول هستند: 9، 11، 15، 17 → 11 و 17 اول هستند</li>
<li>یک عدد مرکب و یک عدد اول بین 20 و 30 → مرکب: 24، اول: 23</li>
</ul>
<p>👉 این بخش کمک می‌کند مفاهیم را در ذهن تثبیت کنی و خودت استدلال کنی.</p>`,
        order: 5
      }
    ]
  });

  teach.save()
    .then(result => res.send(result))
    .catch(err => res.status(500).send(err));
});
